## Лабораторная работа №1

# Цель
1. Создать бакет в Object Storage и развернуть на нем простой статический сайт
2. Создать облачную функцию, позволяющую добавлять файлы в созданный бакет
3. Создать триггер, вызываемый при создании нового файла в бакете
4. Создать облачную функцию, запускаемую триггером, которая добавляет ссылку на вновь созданный файл в html

# Создание бакета 
1. Переходим в Object Storage, создаем бакет unn-cloud-bucket-<ваша фамилия>
с параметрами:
максимальный размер 1ГБ
Доступ на чтение объектов - публичный
остальные значения оставляем по умолчанию

2. Переходим в бакет, вкладка "Веб-сайт". Устанавливаем переключатель в положение "Хостинг". В качестве главной страницы указываем index.html. Нажимаем "Сохранить"
3. Переходим на вкладку "Объекты" и загружаем в бакет файл index.html
4. Переходим по ссылке https://unn-cloud-bucket-<ваша фамилия>.website.yandexcloud.net/, вы должны увидеть форму для загрузки файла (содержимое index.html)
5. Даем сервисной учетке права на работу с бакетом (в списке бакетов, выбираем ACL бакетов, указываем сервисную учетку backet-acc и даем ей права READ\WRITE для вашего бакета)


# Создание функции загрузки 
1. Переходим в Cloud Function, создаем функцию с именем unn-cloud-function-upload-<ваша фамилия>
2. Выбираем Node.js (18 версия)  в качестве среды исполнения
3. Копируем в редактор код функции из папки unn-cloud-upload-function
4. создаем файл packages.json и копируем его содержимое из папки unn-cloud-upload-function
5. Указываем сервисный аккаунт, под которым будет выполняться функция - bucket-acc
6. указываем переменную окружения bucket = unn-cloud-bucket-<ваша фамилия> (обратите внимание - в коде функции используются переменные окружения)
7. Указываем секреты Yandex Lockbox - accessKeyId и secretAccessKey (лежат в key_for_bucket)
8. Нажимаем "сохранить изменения" и смотрим на логи "сборки" - ошибок в них быть не должно.
9. Переходим на вкладку "Обзор", и открываем доступ к функции (переключатель "Публичная функция")
10. Копируем ссылку для вызова и в файле index.html заменяем action в форме на эту ссылку (наша задача - сделать так, чтобы форма посылала данные нашей облачной функции)
11. Выкладываем новый файл index.html в бакет

# Промежуточная проверка
1. Идем по адресу https://unn-cloud-bucket-<ваша фамилия>.website.yandexcloud.net/. Нажимаем в браузере Ctrl-U. Смотрим код формы, убеждаемся, что action правильный (ведет на нашу функцию)
2. В форме выбираем файл для загрузке, загружаем его. 
3. Смотрим в нашем бакете, убеждаемся, что в нем появился новый файл
